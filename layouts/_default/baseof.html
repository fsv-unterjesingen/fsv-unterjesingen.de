<!doctype html>
<html lang="{{ .Site.LanguageCode | default "de" }}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
    <meta name="description" content="Segelflugverein in Unterjesingen bei Tübingen. Schnupperflüge, Ausbildung und Vereinsleben." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@300;500;700&family=Source+Sans+3:wght@300;400;600&display=swap" rel="stylesheet" />
    <link rel="icon" type="image/png" href="{{ "/favicon.png" | relURL }}" />
    {{ $styles := resources.Get "css/main.css" | fingerprint }}
    <link rel="stylesheet" href="{{ $styles.RelPermalink }}" integrity="{{ $styles.Data.Integrity }}" />
  </head>
  <body>
    {{ partial "header.html" . }}
    <main{{ if not .IsHome }} class="has-fixed-header"{{ end }}>
      {{ block "main" . }}{{ end }}
    </main>
    {{ partial "footer.html" . }}
    <script>
      (function () {
        var header = document.querySelector(".site-header");
        if (!header) return;
        var toggle = function () {
          if (window.scrollY > 20) {
            header.classList.add("is-scrolled");
          } else {
            header.classList.remove("is-scrolled");
          }
        };
        toggle();
        window.addEventListener("scroll", toggle, { passive: true });
      })();
      (function () {
        var nav = document.querySelector(".main-nav");
        if (!nav) return;
        var closeAll = function () {
          nav.querySelectorAll("li.has-children.is-open").forEach(function (li) {
            li.classList.remove("is-open");
            var link = li.querySelector("a[data-menu-parent]");
            if (link) link.setAttribute("aria-expanded", "false");
          });
        };
        window.fsvToggleMenu = function (event, link) {
          if (!link || !link.closest("li.has-children")) return false;
          event.preventDefault();
          event.stopPropagation();
          var li = link.closest("li.has-children");
          var isOpen = li.classList.contains("is-open");
          closeAll();
          if (!isOpen) {
            li.classList.add("is-open");
            link.setAttribute("aria-expanded", "true");
          }
          return false;
        };
        // Capture clicks on menu parents to ensure reliable toggling on mobile.
        document.addEventListener(
          "click",
          function (event) {
            var link = event.target.closest("a[data-menu-parent]");
            if (!link) {
              if (!nav.contains(event.target)) closeAll();
              return;
            }
            window.fsvToggleMenu(event, link);
          },
          true
        );
      })();
    </script>
  </body>
</html>
