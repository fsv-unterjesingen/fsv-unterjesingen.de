<!doctype html>
<html lang="{{ .Site.LanguageCode | default "de" }}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
    <meta name="description" content="Segelflugverein in Unterjesingen bei Tübingen. Schnupperflüge, Ausbildung und Vereinsleben." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@300;500;700&family=Source+Sans+3:wght@300;400;600&display=swap" rel="stylesheet" />
    <link rel="icon" type="image/png" href="{{ "/favicon.png" | relURL }}" />
    {{ $styles := resources.Get "css/main.css" | fingerprint }}
    <link rel="stylesheet" href="{{ $styles.RelPermalink }}" integrity="{{ $styles.Data.Integrity }}" />
  </head>
  <body>
    {{ partial "header.html" . }}
    <main{{ if not .IsHome }} class="has-fixed-header"{{ end }}>
      {{ block "main" . }}{{ end }}
    </main>
    {{ partial "footer.html" . }}
    <script>
      (function () {
        var header = document.querySelector(".site-header");
        if (!header) return;
        var toggle = function () {
          if (window.scrollY > 20) {
            header.classList.add("is-scrolled");
          } else {
            header.classList.remove("is-scrolled");
          }
        };
        toggle();
        window.addEventListener("scroll", toggle, { passive: true });
      })();
      (function () {
        var nav = document.querySelector(".main-nav");
        if (!nav) return;
        var parents = nav.querySelectorAll("li.has-children > a");
        var closeAll = function () {
          nav.querySelectorAll("li.has-children.is-open").forEach(function (li) {
            li.classList.remove("is-open");
          });
        };
        parents.forEach(function (link) {
          link.addEventListener("click", function (event) {
            event.preventDefault();
            var li = link.parentElement;
            var isOpen = li.classList.contains("is-open");
            closeAll();
            if (!isOpen) li.classList.add("is-open");
          });
        });
        document.addEventListener("click", function (event) {
          if (!nav.contains(event.target)) closeAll();
        });
      })();
    </script>
  </body>
</html>
